# Система аутентификации админки

## Обзор
Реализована система защиты админской панели от несанкционированного доступа.

## Компоненты системы

### 1. Middleware (`frontend_next/src/middleware.ts`)
- Проверяет все запросы к `/admin/*` маршрутам
- Исключает страницу логина `/admin/login` из проверки
- Перенаправляет неаутентифицированных пользователей на страницу входа
- Проверяет наличие cookie `admin-token=authenticated`

### 2. Auth Hook (`frontend_next/src/hooks/useAuth.ts`)
- Управляет состоянием аутентификации
- Предоставляет методы `login()`, `logout()`, `checkAuth()`
- Хранит токен в cookies с временем жизни 24 часа
- Автоматически перенаправляет на страницу логина при выходе

### 3. Обновленный Layout (`frontend_next/src/app/admin/layout.tsx`)
- Проверяет аутентификацию перед отображением админки
- Показывает загрузку во время проверки
- Добавлена кнопка "Выйти" в верхней панели
- Исключает страницу логина из проверки

### 4. Страница логина (`frontend_next/src/app/admin/login/page.tsx`)
- Форма входа с валидацией
- Автоматическое перенаправление если уже аутентифицирован
- Автоматическое скрытие ошибок через 3 секунды
- Использует auth hook для управления состоянием

### 5. AuthGuard компонент (`frontend_next/src/components/admin/AuthGuard.tsx`)
- Дополнительная защита на уровне компонентов
- Можно использовать для защиты отдельных компонентов

## Учетные данные
- **Логин**: `admin`
- **Пароль**: `MLCdJIqUJyvFwV1`

## Как это работает

1. **Доступ к админке**: При попытке зайти на любую страницу `/admin/*` (кроме `/admin/login`)
2. **Проверка middleware**: Middleware проверяет наличие cookie `admin-token`
3. **Перенаправление**: Если токена нет - перенаправление на `/admin/login`
4. **Аутентификация**: После успешного входа устанавливается cookie на 24 часа
5. **Доступ разрешен**: Пользователь получает доступ к админке
6. **Выход**: Кнопка "Выйти" удаляет cookie и перенаправляет на логин

## Безопасность
- Токен хранится в httpOnly cookie (можно улучшить)
- Время жизни токена: 24 часа
- Автоматический выход при истечении токена
- Защита на уровне middleware (серверная сторона)
- Дополнительная защита на уровне компонентов

## Для продакшена
В реальном проекте рекомендуется:
- Использовать JWT токены
- Подключить к базе данных пользователей
- Добавить хеширование паролей
- Реализовать refresh токены
- Добавить rate limiting
- Использовать HTTPS
- Добавить двухфакторную аутентификацию