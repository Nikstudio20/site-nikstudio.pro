# Инструкция по тестированию Homepage Editor

## Быстрый тест

### 1. Тест загрузки SVG изображений

#### Секция Hero
1. Откройте http://localhost:3000/admin/homepage-editor
2. Перейдите на вкладку "Hero"
3. Найдите поле "Логотип"
4. Загрузите SVG файл (например, логотип компании)
5. **Ожидаемый результат:** Изображение успешно загружено, показано превью

#### Секция Контент
1. Перейдите на вкладку "Контент"
2. Найдите раздел "Логотипы клиентов"
3. Загрузите SVG логотип в любое из 6 полей
4. **Ожидаемый результат:** Логотип успешно загружен

#### Секция Услуги
1. Перейдите на вкладку "Услуги"
2. Выберите любую услугу (1-7)
3. Загрузите SVG изображение в поле "Изображение услуги"
4. **Ожидаемый результат:** Изображение успешно загружено

#### Секция Отзывы
1. Перейдите на вкладку "Отзывы"
2. Выберите любой отзыв (1-6)
3. Загрузите SVG в поле "Фото автора"
4. **Ожидаемый результат:** Фото успешно загружено

---

### 2. Тест загрузки других форматов

Повторите тесты выше с файлами форматов:
- ✅ JPG
- ✅ PNG
- ✅ WEBP

**Ожидаемый результат:** Все форматы загружаются успешно

---

### 3. Тест валидации размера файла

1. Попробуйте загрузить изображение больше 2 МБ
2. **Ожидаемый результат:** 
   - Показано сообщение об ошибке: "Размер файла не должен превышать 2 МБ"
   - Файл не загружен

---

### 4. Тест валидации формата файла

1. Попробуйте загрузить файл неподдерживаемого формата (например, .txt, .pdf)
2. **Ожидаемый результат:**
   - Показано сообщение об ошибке: "Разрешены только файлы форматов: JPG, PNG, WEBP, SVG"
   - Файл не загружен

---

### 5. Тест удаления главного видео

1. Откройте http://localhost:3000/admin/homepage-editor
2. Найдите секцию "Управление главным видео"
3. Если видео уже загружено:
   - Нажмите кнопку "Удалить"
   - Подтвердите удаление
   - **Ожидаемый результат:** Видео удалено из интерфейса
4. Проверьте файловую систему:
   - Откройте папку `backend_laravel/storage/app/public/home/hero-videos/`
   - **Ожидаемый результат:** Файл видео удалён из папки

---

### 6. Тест замены главного видео

1. Загрузите новое видео через форму "Загрузить видео"
2. **Ожидаемый результат:** 
   - Новое видео загружено
   - Старое видео автоматически удалено из папки
3. Проверьте папку `backend_laravel/storage/app/public/home/hero-videos/`
4. **Ожидаемый результат:** В папке только один файл (новое видео)

---

### 7. Тест удаления видео услуги

1. Найдите секцию "Управление видео услуг" (Видео продакшн)
2. Если видео загружено:
   - Нажмите кнопку "Удалить"
   - Подтвердите удаление
   - **Ожидаемый результат:** Видео удалено
3. Проверьте папку `backend_laravel/storage/app/public/services/videos/`
4. **Ожидаемый результат:** Файл видео удалён

---

## Проверка на продакшене

### Перед деплоем:

1. ✅ Все тесты выше пройдены успешно
2. ✅ Проверена работа с существующими изображениями
3. ✅ Проверена вёрстка на разных разрешениях
4. ✅ Проверена скорость загрузки страниц

### После деплоя:

1. Проверьте загрузку SVG на продакшене
2. Проверьте отображение SVG на фронтенде
3. Проверьте удаление видео на продакшене

---

## Возможные проблемы и решения

### Проблема: "Ошибка сервера при загрузке изображения"

**Решение:**
1. Проверьте права доступа к папке `storage/app/public/homepage/`
2. Убедитесь, что папка существует
3. Проверьте логи Laravel: `backend_laravel/storage/logs/laravel.log`

### Проблема: SVG не отображается на фронтенде

**Решение:**
1. Проверьте, что SVG файл корректный (откройте в браузере)
2. Убедитесь, что SVG не содержит внешних зависимостей
3. Проверьте Content-Type в заголовках ответа сервера

### Проблема: Видео не удаляется из папки

**Решение:**
1. Проверьте права доступа к папке `storage/app/public/home/hero-videos/`
2. Проверьте логи Laravel
3. Убедитесь, что путь к файлу корректный в базе данных

---

## Команды для проверки

### Проверка прав доступа (Linux/Mac):
```bash
cd backend_laravel
ls -la storage/app/public/homepage/
ls -la storage/app/public/home/hero-videos/
ls -la storage/app/public/services/videos/
```

### Проверка логов:
```bash
cd backend_laravel
tail -f storage/logs/laravel.log
```

### Очистка кеша (если нужно):
```bash
cd backend_laravel
php artisan cache:clear
php artisan config:clear
```

---

## Контрольный список

- [ ] SVG загружается в секцию Hero
- [ ] SVG загружается в секцию Контент (логотипы клиентов)
- [ ] SVG загружается в секцию Услуги
- [ ] SVG загружается в секцию Отзывы
- [ ] JPG/PNG/WEBP загружаются корректно
- [ ] Валидация размера файла работает (>2MB)
- [ ] Валидация формата файла работает
- [ ] Главное видео удаляется из папки
- [ ] Видео услуги удаляется из папки
- [ ] При замене видео старый файл удаляется
- [ ] Вёрстка не нарушена
- [ ] Скорость загрузки не ухудшилась
