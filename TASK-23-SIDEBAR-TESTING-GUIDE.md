# Task 23: Тестирование отображения Sidebar после входа

## Статус: ✅ Готово к тестированию

Этот документ содержит подробное руководство по тестированию отображения sidebar после успешного входа в админ-панель.

## Требования (Requirements: 8.4)

- После успешного входа проверить, что sidebar отображается
- Проверить, что все пункты меню работают
- Проверить, что активный пункт меню подсвечивается
- Проверить кнопку выхода

## Подготовка к тестированию

### 1. Запуск серверов

**Backend (Laravel):**
```bash
cd backend_laravel
php artisan serve
```

**Frontend (Next.js):**
```bash
cd frontend_next
npm run dev
```

### 2. Учетные данные

Используйте существующие учетные данные администратора:
- Email/Username: `admin@example.com` (или ваш admin username)
- Password: ваш пароль администратора

## Ручное тестирование

### Sub-task 1: После успешного входа проверить, что sidebar отображается

**Шаги:**
1. Откройте браузер и перейдите на `http://localhost:3000/admin/login`
2. Введите корректные учетные данные
3. Нажмите кнопку "Войти"
4. После успешного входа вы будете перенаправлены на `/admin`

**Ожидаемый результат:**
- ✅ Sidebar отображается слева на странице
- ✅ Sidebar содержит логотип вверху
- ✅ Видны разделы меню: "Приложение" и "Настройки"
- ✅ Видны все пункты меню
- ✅ Видна кнопка "Выйти" внизу sidebar

**Проверка:**
- [ ] Sidebar виден после входа
- [ ] Логотип отображается в sidebar
- [ ] Все разделы меню присутствуют
- [ ] Кнопка выхода видна

---

### Sub-task 2: Проверить, что все пункты меню работают

**Пункты меню для проверки:**

#### 2.1 Главная страница
- Нажмите на "Главная страница" в sidebar
- **Ожидаемый результат:** Переход на `/admin/homepage-editor`
- [ ] ✅ Переход выполнен успешно

#### 2.2 Блог
- Нажмите на "Блог" в sidebar
- **Ожидаемый результат:** Переход на `/admin/blog`
- [ ] ✅ Переход выполнен успешно

#### 2.3 Категории
- Нажмите на "Категории" в sidebar
- **Ожидаемый результат:** Переход на `/admin/category`
- [ ] ✅ Переход выполнен успешно

#### 2.4 Проекты
- Нажмите на "Проекты" в sidebar
- **Ожидаемый результат:** Переход на `/admin/projects`
- [ ] ✅ Переход выполнен успешно

#### 2.5 Медиа-страница
- Нажмите на "Медиа-страница" в sidebar
- **Ожидаемый результат:** Переход на `/admin/media-page`
- [ ] ✅ Переход выполнен успешно

#### 2.6 SEO управление
- Нажмите на "SEO управление" в sidebar
- **Ожидаемый результат:** Переход на `/admin/seo`
- [ ] ✅ Переход выполнен успешно

#### 2.7 Сменить пароль (в разделе Настройки)
- Нажмите на "Сменить пароль" в sidebar
- **Ожидаемый результат:** Переход на `/admin/settings/change-password`
- [ ] ✅ Переход выполнен успешно

**Итоговая проверка:**
- [ ] Все 7 пунктов меню работают корректно
- [ ] Нет ошибок при навигации
- [ ] Страницы загружаются без проблем

---

### Sub-task 3: Проверить, что активный пункт меню подсвечивается

**Шаги для каждой страницы:**

#### 3.1 Главная страница
1. Перейдите на `/admin/homepage-editor`
2. Посмотрите на пункт "Главная страница" в sidebar
3. **Ожидаемый результат:** Текст пункта меню окрашен в красный цвет `#DE063A`
4. [ ] ✅ Активный пункт подсвечен

#### 3.2 Блог
1. Перейдите на `/admin/blog`
2. Посмотрите на пункт "Блог" в sidebar
3. **Ожидаемый результат:** Текст пункта меню окрашен в красный цвет `#DE063A`
4. [ ] ✅ Активный пункт подсвечен

#### 3.3 Категории
1. Перейдите на `/admin/category`
2. Посмотрите на пункт "Категории" в sidebar
3. **Ожидаемый результат:** Текст пункта меню окрашен в красный цвет `#DE063A`
4. [ ] ✅ Активный пункт подсвечен

#### 3.4 Проекты
1. Перейдите на `/admin/projects`
2. Посмотрите на пункт "Проекты" в sidebar
3. **Ожидаемый результат:** Текст пункта меню окрашен в красный цвет `#DE063A`
4. [ ] ✅ Активный пункт подсвечен

#### 3.5 Медиа-страница
1. Перейдите на `/admin/media-page`
2. Посмотрите на пункт "Медиа-страница" в sidebar
3. **Ожидаемый результат:** Текст пункта меню окрашен в красный цвет `#DE063A`
4. [ ] ✅ Активный пункт подсвечен

#### 3.6 SEO управление
1. Перейдите на `/admin/seo`
2. Посмотрите на пункт "SEO управление" в sidebar
3. **Ожидаемый результат:** Текст пункта меню окрашен в красный цвет `#DE063A`
4. [ ] ✅ Активный пункт подсвечен

#### 3.7 Сменить пароль
1. Перейдите на `/admin/settings/change-password`
2. Посмотрите на пункт "Сменить пароль" в sidebar
3. **Ожидаемый результат:** Текст пункта меню окрашен в красный цвет `#DE063A`
4. [ ] ✅ Активный пункт подсвечен

**Дополнительная проверка:**
- [ ] При наведении курсора на пункт меню, текст меняет цвет на красный
- [ ] Только один пункт меню активен одновременно
- [ ] Неактивные пункты меню имеют обычный цвет

---

### Sub-task 4: Проверить кнопку выхода

**Шаги:**

#### 4.1 Проверка видимости кнопки
1. Находясь на любой странице админки, посмотрите на sidebar
2. **Ожидаемый результат:** 
   - Кнопка "Выйти" видна в нижней части sidebar
   - Рядом с текстом есть иконка выхода (LogOut icon)
3. [ ] ✅ Кнопка "Выйти" видна
4. [ ] ✅ Иконка отображается корректно

#### 4.2 Проверка функциональности выхода
1. Нажмите на кнопку "Выйти" в sidebar
2. **Ожидаемый результат:**
   - Вы перенаправлены на страницу `/admin/login`
   - Sidebar больше не отображается на странице логина
   - Cookie `admin-token` удален
3. [ ] ✅ Редирект на страницу логина выполнен
4. [ ] ✅ Sidebar скрыт на странице логина

#### 4.3 Проверка защиты после выхода
1. После выхода попробуйте вручную перейти на `/admin/projects`
2. **Ожидаемый результат:**
   - Вы автоматически перенаправлены на `/admin/login`
   - Доступ к защищенным страницам заблокирован
3. [ ] ✅ Защищенные страницы недоступны после выхода
4. [ ] ✅ Автоматический редирект на логин работает

#### 4.4 Проверка повторного входа
1. Войдите снова с корректными учетными данными
2. **Ожидаемый результат:**
   - Вход выполнен успешно
   - Sidebar снова отображается
   - Все функции работают как прежде
3. [ ] ✅ Повторный вход работает корректно
4. [ ] ✅ Sidebar отображается после повторного входа

---

## Дополнительные проверки

### Responsive Design
1. Уменьшите ширину окна браузера
2. **Ожидаемый результат:**
   - Sidebar адаптируется к меньшему размеру экрана
   - Кнопка toggle sidebar появляется в header
3. [ ] ✅ Sidebar responsive работает

### Hover States
1. Наведите курсор на каждый пункт меню
2. **Ожидаемый результат:**
   - Текст меняет цвет на красный `#DE063A`
   - Переход плавный
3. [ ] ✅ Hover эффекты работают

### Брендинг
1. Проверьте логотип в sidebar
2. **Ожидаемый результат:**
   - Логотип отображается корректно
   - Клик по логотипу открывает главную страницу сайта в новой вкладке
3. [ ] ✅ Логотип работает корректно

---

## Автоматизированное тестирование

Для запуска автоматизированных E2E тестов:

```bash
cd frontend_next

# Убедитесь, что оба сервера запущены (backend и frontend)

# Запуск тестов
npx playwright test admin-sidebar-display.spec.ts --project=chromium

# Запуск с UI
npx playwright test admin-sidebar-display.spec.ts --project=chromium --ui

# Запуск в headed режиме (видимый браузер)
npx playwright test admin-sidebar-display.spec.ts --project=chromium --headed
```

**Примечание:** Для автоматизированных тестов необходимо:
- Backend должен быть запущен на `http://localhost:8000`
- Frontend должен быть запущен на `http://localhost:3000`
- Установлены Playwright browsers: `npx playwright install`

---

## Результаты тестирования

### Общий чеклист

- [ ] Sub-task 1: Sidebar отображается после входа
- [ ] Sub-task 2: Все пункты меню работают (7/7)
- [ ] Sub-task 3: Активные пункты подсвечиваются (7/7)
- [ ] Sub-task 4: Кнопка выхода работает корректно

### Найденные проблемы

Если обнаружены проблемы, опишите их здесь:

1. **Проблема:**
   - Описание:
   - Шаги воспроизведения:
   - Ожидаемое поведение:
   - Фактическое поведение:

---

## Заключение

После успешного прохождения всех проверок:

✅ **Task 23 выполнен полностью**

Все требования выполнены:
- Sidebar отображается после успешного входа
- Все пункты меню функциональны
- Активные пункты меню корректно подсвечиваются
- Кнопка выхода работает правильно

---

## Технические детали

### Компоненты
- **Sidebar:** `frontend_next/src/components/app-sidebar.tsx`
- **Layout:** `frontend_next/src/app/admin/layout.tsx`
- **Test:** `frontend_next/tests/e2e/admin-sidebar-display.spec.ts`

### Цвета
- **Активный пункт:** `#DE063A` (красный)
- **Hover:** `#DE063A` (красный)
- **Обычный:** цвет по умолчанию

### Пункты меню
1. Главная страница → `/admin/homepage-editor`
2. Блог → `/admin/blog`
3. Категории → `/admin/category`
4. Проекты → `/admin/projects`
5. Медиа-страница → `/admin/media-page`
6. SEO управление → `/admin/seo`
7. Сменить пароль → `/admin/settings/change-password`

---

**Дата создания:** 2025-10-07
**Версия:** 1.0
**Статус:** Готово к тестированию
