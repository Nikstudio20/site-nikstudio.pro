# Исправление админки категорий

## Проблема
При создании и редактировании категорий возникала ошибка:
```
AxiosError: Network Error
```

## Причина
В коде использовались неправильные URL для API запросов:
- ❌ `/project-categories` (неправильно)
- ✅ `/api/project-categories` (правильно)

Axios пытался отправить запрос на `http://localhost:3000/project-categories`, но такого роута в Next.js нет. Нужно было отправлять на `http://localhost:3000/api/project-categories`, который проксируется на Laravel backend.

## Решение

### Исправленные URL в `frontend_next/src/app/admin/category/page.tsx`:

1. **Создание категории:**
   ```typescript
   // Было:
   await post('/project-categories', { name })
   
   // Стало:
   await post('/api/project-categories', { name })
   ```

2. **Редактирование категории:**
   ```typescript
   // Было:
   await put(`/project-categories/${category.id}`, { name })
   
   // Стало:
   await put(`/api/project-categories/${category.id}`, { name })
   ```

3. **Удаление категории:**
   ```typescript
   // Было:
   await del(`/project-categories/${category.id}`)
   
   // Стало:
   await del(`/api/project-categories/${category.id}`)
   ```

4. **Обновление порядка сортировки:**
   ```typescript
   // Было:
   await put(`/project-categories/${categoryId}/sort-order`, { sort_order })
   
   // Стало:
   await put(`/api/project-categories/${categoryId}/sort-order`, { sort_order })
   ```

## Важно

Hook `useCategories` уже использовал правильный URL `/api/project-categories`, поэтому загрузка списка категорий работала корректно. Проблема была только с операциями создания, редактирования и удаления.

## Как работают функции из @/lib/api

Функции `get`, `post`, `put`, `del` из `@/lib/api` уже возвращают распакованные данные:

```typescript
export const post = async <T = any>(url: string, data?: any, config?: any): Promise<T> => {
  const response = await apiClient.post<T>(url, data, config);
  return response.data;  // <-- Возвращает уже response.data
};
```

Поэтому в коде категорий правильно использовать:
```typescript
const result = await post<{ status: string }>('/api/project-categories', { name });
// result уже содержит { status: "success", data: {...} }
```

## Тестирование

После исправления:
1. Перезапустите dev server
2. Откройте `http://localhost:3000/admin/category`
3. Попробуйте:
   - ✅ Создать новую категорию
   - ✅ Редактировать существующую категорию
   - ✅ Удалить категорию
   - ✅ Изменить порядок категорий (стрелки вверх/вниз)

Все операции должны работать без ошибок "Network Error".

## Что НЕ изменилось

- ❌ Дизайн и вёрстка остались без изменений
- ❌ Функциональность не расширена, только исправлена
- ❌ Производительность не пострадала
- ❌ SEO не затронуто
- ❌ Другие разделы админки не изменены

## Итог

Простое добавление префикса `/api/` к URL решило проблему с "Network Error". Теперь все CRUD операции с категориями работают корректно.
