# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ Carbon TypeError

## –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –≤—Ö–æ–¥–µ –≤ –∞–¥–º–∏–Ω–∫—É –ø–æ –∞–¥—Ä–µ—Å—É `http://localhost:3000/admin/login` –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞:

```
Carbon\Carbon::rawAddUnit(): Argument #3 ($value) must be of type int|float, string given
```

## –ü—Ä–∏—á–∏–Ω–∞

–ú–µ—Ç–æ–¥ `Carbon::addMinutes()` —Ç—Ä–µ–±—É–µ—Ç –∞—Ä–≥—É–º–µ–Ω—Ç —Ç–∏–ø–∞ `int` –∏–ª–∏ `float`, –Ω–æ –ø–æ–ª—É—á–∞–ª `string`.

–≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ –ø–æ—Ç–æ–º—É, —á—Ç–æ:
1. –í `.env` —Ñ–∞–π–ª–µ –∑–Ω–∞—á–µ–Ω–∏—è —É–∫–∞–∑–∞–Ω—ã –∫–∞–∫ —Å—Ç—Ä–æ–∫–∏:
   ```
   SANCTUM_TOKEN_EXPIRATION=480
   SANCTUM_REMEMBER_EXPIRATION=43200
   ```

2. –§—É–Ω–∫—Ü–∏—è `env()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä–æ–∫–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ

3. –§—É–Ω–∫—Ü–∏—è `config()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∫–∞–∫ –µ—Å—Ç—å (–±–µ–∑ –ø—Ä–∏–≤–µ–¥–µ–Ω–∏—è —Ç–∏–ø–∞)

4. –í –∫–æ–¥–µ –ø–µ—Ä–µ–¥–∞–≤–∞–ª–æ—Å—å —Å—Ç—Ä–æ–∫–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ `addMinutes()`:
   ```php
   $expirationMinutes = config('sanctum.expiration', 480); // –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç "480" (string)
   $expiresAt = now()->addMinutes($expirationMinutes); // TypeError!
   ```

## –†–µ—à–µ–Ω–∏–µ

### 1. AuthController.php

**–§–∞–π–ª:** `backend_laravel/app/Http/Controllers/Api/AuthController.php`

**–ë—ã–ª–æ:**
```php
$expirationMinutes = $remember 
    ? config('sanctum.remember_expiration', 43200) // 30 days
    : config('sanctum.expiration', 480); // 8 hours

$expiresAt = now()->addMinutes($expirationMinutes);
```

**–°—Ç–∞–ª–æ:**
```php
$expirationMinutes = $remember 
    ? (int) config('sanctum.remember_expiration', 43200) // 30 days
    : (int) config('sanctum.expiration', 480); // 8 hours

$expiresAt = now()->addMinutes($expirationMinutes);
```

**–ò–∑–º–µ–Ω–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω–æ —è–≤–Ω–æ–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ –∫ —Ç–∏–ø—É `(int)`

### 2. RefreshTokenMiddleware.php

**–§–∞–π–ª:** `backend_laravel/app/Http/Middleware/RefreshTokenMiddleware.php`

**–ë—ã–ª–æ:**
```php
$originalLifetime = $accessToken->created_at->diffInMinutes($accessToken->expires_at);
$newExpiresAt = now()->addMinutes($originalLifetime);
```

**–°—Ç–∞–ª–æ:**
```php
$originalLifetime = (int) $accessToken->created_at->diffInMinutes($accessToken->expires_at);
$newExpiresAt = now()->addMinutes($originalLifetime);
```

**–ò–∑–º–µ–Ω–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω–æ —è–≤–Ω–æ–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ –∫ —Ç–∏–ø—É `(int)` (—Ö–æ—Ç—è `diffInMinutes` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç float, –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ –∫ int –±–µ–∑–æ–ø–∞—Å–Ω–æ –¥–ª—è –º–∏–Ω—É—Ç)

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ –≤ PHP

–°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `test-carbon-fix.php` –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –ø—Ä–æ–±–ª–µ–º—ã:

```php
// –≠—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É:
$minutes = "480"; // string
Carbon::now()->addMinutes($minutes); // TypeError!

// –≠—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
$minutes = 480; // int
Carbon::now()->addMinutes($minutes); // OK

// –≠—Ç–æ —Ç–æ–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (–Ω–∞—à–µ —Ä–µ—à–µ–Ω–∏–µ):
$minutes = "480"; // string
Carbon::now()->addMinutes((int)$minutes); // OK
```

### –¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ—à–∏–±–æ–∫! üéâ
–∞—Ç—å –±–µ–∑ –µ–Ω —Ä–∞–±–æ—Ç–∏–Ω–∫—É –¥–æ–ª–∂ –≤—Ö–æ–¥ –≤ –∞–¥–º
–¢–µ–ø–µ—Ä—å—Ä–∞—Ü–∏–∏
–Ω—Ñ–∏–≥—É–∑–º–µ–Ω–µ–Ω–∏–π –∫–æ—Å–ª–µ –∏—Ä—É–π—Ç–µ –∫–æ–¥ –ø–æ
3. –¢–µ—Å—Ç–∏–∑–∞—Ü–∏—é–ø–∏—É—é —Ç–∏—â–∏—Ö —Å—Ç—Ä–æ–≥–æ–¥–æ–≤, —Ç—Ä–µ–±—É—é–æ–≤ –¥–ª—è –º–µ—Ç—É–º–µ–Ω—Ç –∞—Ä–≥—Ä—è–π—Ç–µ —Ç–∏–ø—ã–ü—Ä–æ–≤–µ`env()`
2. –∏ g()` fi—Å `con—Ä–∞–±–æ—Ç–µ –≤ –ø—Ä–∏ –∏–ø–æ—Ä–∏–≤–µ–¥–µ–Ω–∏–µ —Ç–≤–Ω–æ–µ –ø—å–∑—É–π—Ç–µ —è—Å–ø–æ–ª. –í—Å–µ–≥–¥–∞ –∏–∏–∏

1–µ–Ω–¥–∞—Ü### üéØ –†–µ–∫–æ–º

–æ–±–Ω–æ–≤–ª–µ–Ω–∞—è –∫—É–º–µ–Ω—Ç–∞—Ü–∏
- –î–æ–¥–∞–Ω—ã—Å–æ–∑—Å—Ç—ã –¢–µ—à –æ—á–∏—â–µ–Ω
- –Ω—ã
- –ö—ç—Ä–∏–º–µ–Ω–µ–ª–µ–Ω–∏—è –ø—Å–µ –∏—Å–ø—Ä–∞–≤–≤–∞–Ω–∏—é

- –í–ø–æ–ª—å–∑–æ–≤ –∫ –∏—Å –≥–æ—Ç–æ
### ‚úÖ –ö–æ–¥–∞
–µ–Ω–µ–Ω–∏–∏ —Ç–æ–∫–æ–≤–ª –æ–±–Ωdle()` - –ø—Ä–∏::hanreokenMiddlewaRefreshT–Ω–∞
2. `–æ–∑–¥–∞–Ω–∏–∏ —Ç–æ–∫–µ–∏ —Å` - –ø—Älogin()r::le`AuthControl—Å—Ç–∞—Ö:
1. —Ö –º–µ` –≤ –¥–≤—É`(int)–∞ –Ω–∏—è —Ç–∏–ø –ø—Ä–∏–≤–µ–¥–µ–Ω–æ–≥–æ–∞–≤–ª–µ–Ω–∏—è —è–≤–º –¥–æ–± –ø—É—Ç—ë—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ypeError` –∏ Tbon–∫–∞ `Car—à–∏–±

–û —Ä–µ—à–µ–Ω–∞‚úÖ –ü—Ä–æ–±–ª–µ–º–∞
### 
 –ó–∞–∫–ª—é—á–µ–Ω–∏–µ
##
}
```
9.000000Z"-08T00:54:5-1025": "20expires_at
  "com"
  },in@example.adm": "mail    "ein",
"Admme": 
    "na": 1,{
    "idr": ,
  "usebcdef..." "1|a "token":: true,
 "success"json
{
  API:

```—Ç –∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ

### –û–∂—ã—Ç—å –æ—à–∏–±–æ–∫–¥–æ–ª–∂–Ω–æ –±—Ä–∞ –Ω–µ –∑–µ–∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–í ‚úì - rbon
    Ca–æ–∫ –±—ã—Ç—å –æ—à–∏–±–æ–ª–∂–Ω–æ   - ‚úì –ù–µ –¥–µ–Ω
–ª—É—á–µ–Ω —Ç–æ–∫–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ - ‚úì –î–æ—Å–ø–µ—à–Ω–æ
  –Ω –ø—Ä–æ–π—Ç–∏ —É—Ö–æ–¥ –¥–æ–ª–∂–µ- ‚úì –í—Ç:**
   –∑—É–ª—å—Ç–∞—å—Ç–µ —Ä–µ–≤–µ—Ä
4. **–ü—Ä–ærd`
 `passwo - –ü–∞—Ä–æ–ª—å:e.com`
  admin@exampl `- Email:
   –≤—Ö–æ–¥:**–í—ã–ø–æ–ª–Ω–∏—Ç–µ 
3. **login`
0/admin/t:300calhoslo://–∞ `http—Ç–µ –Ω–µ–π–¥–∏–ø–µ—Ä   - –ò–ª–∏ –∞—É–∑–µ—Ä–µ
l` –≤ –±—Äage.htmn-ptest-logi–µ `–û—Ç–∫—Ä–æ–π—Ç
   - —Ä–∞–Ω–∏—Ü—É:**–≤—É—é —Å—Ç–µ—Å—Ç–æ—Ä–æ–π—Ç–µ —Ç2. **–û—Ç–∫```

erve
   isan shp artaravel
   pcd backend_lh
      ```bas*
end:*—Ç–∏—Ç–µ back
1. **–ó–∞–ø—É—Å–∞–≤–ª–µ–Ω–∏—è:
 –∏—Å–ø—Ä–µ—Ä–∫–∏ –¥–ª—è –ø—Ä–æ–≤ –®–∞–≥–∏–µ

###–∞–Ω–∏## –¢–µ—Å—Ç–∏—Ä–æ–≤—á–µ–Ω–∏—è

–∫–∞ –∑–Ω–∞—Ç–æ—á–Ω–∏–∏–º–æ –æ—Ç –∏—Å–Ω–µ–∑–∞–≤–∏—Å –†–∞–±–æ—Ç–∞–µ—Ç –∞–µ—Ç—Å—è int
-–æ –æ–∂–∏–¥ —á—Ç—Ç–Ω–æ –∏–∑ –∫–æ–¥–∞,—ã
- –ü–æ–Ω—è —Ñ–∞–π–ª–Ω—ã–µ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–∑–º–µ–Ω—è–µ—Ç –∫–æ–Ω–∏—è
- –ù–µ –∏–ª—å–∑–æ–≤–∞–µ—Å—Ç–µ –∏—Å–ø–æ —Ç–∏–ø–∞ –≤ –º–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ:**
- –Ø–≤–Ω–æ
**–ü–ª—é—Å—ã;
```
480)n', .expiratiosanctumonfig('es = (int) ctionMinuthp
$expira```p

–µ–Ω–¥—É–µ—Ç—Å—è) ‚úì–Ω–∏–µ (—Ä–µ–∫–æ–º–µ —Ä–µ—à–µ—Ä–∏–∞–Ω—Ç 3: –ù–∞—à

### –í–∞ –ø—Ä–æ–±–ª–µ–º—É –∫–æ—Ä–Ω–µ–≤—É—é–µ—Ç- –ù–µ —Ä–µ—à–∞g
–µ—Ç strin–æ –≤–æ–∑–≤—Ä–∞—â–∞—Å—ë —Ä–∞–≤–Ω` –≤*
- `env()*–ú–∏–Ω—É—Å—ã:*
```

*N=480EXPIRATIOKEN_ANCTUM_TOenv
S``

`—É)–±–ª–µ–º—à–∞–µ—Ç –ø—Ä–æ.env (–Ω–µ —Ä–µ–Ω–∏—Ç—å —Ç 2: –ò–∑–º–µ# –í–∞—Ä–∏–∞–Ω

##–Ω–∏–∏ –ø–∞–∫–µ—Ç–∞–Ω–æ–≤–ª–µ –æ–±–æ –ø—Ä–∏–∏—Å–∞–Ω—ã—Ç—å –ø–µ—Ä–µ–∑–∞–ø–ª
- –ú–æ–∂–µ—Ç –± —Ñ–∞–π—Ü–∏–æ–Ω–Ω—ã–π–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞*
- –ò–∑–º–µ–Ω—è*–ú–∏–Ω—É—Å—ã:*
```

*ON', 43200),XPIRATI_REMEMBER_ECTUMAN('S=> (int) envpiration' emember_ex0),
'rATION', 48EN_EXPIRSANCTUM_TOK (int) env('ion' =>
'expirat`php—è)

``–µ–Ω–¥—É–µ—Ç—Åp (–Ω–µ —Ä–µ–∫–æ–ºum.phfig/sanct–∑–º–µ–Ω–∏—Ç—å con–∏–∞–Ω—Ç 1: –ò

### –í–∞—Ä–µ—à–µ–Ω–∏—è–∞—Ç–∏–≤–Ω—ã–µ —Ä—Ç–µ—Ä–Ω+

## –ê–ª—å 8.2PHPctices  pra—É–µ—Ç best–≤–µ—Ç—Å—Ç–≤–º
- –°–æ–æ—Ç–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã—Ç –∫–æ–¥ –±–æ–ª–µ–µ –±–∫–∏
- –î–µ–ª–∞–µ–∏–¥–∞–Ω–Ω—ã–µ –æ—à–∏–≤—Ä–∞—â–∞–µ—Ç –Ω–µ–æ–∂–æ—Ç- –ü—Ä–µ–¥–æ–≤:
–¥–µ–Ω–∏–µ —Ç–∏–ø–ø—Ä–∏–≤–µ

–Ø–≤–Ω–æ–µ —Å–Ω–æ—Å—Ç—å —Ç–∏–ø–æ–≤ –ë–µ–∑–æ–ø–∞r`.

###peErro–≤–µ—Ç `Ty–∑–æ—Ä–æ–∫–∏ –≤—ã —Å—Ç—á–∞, —á—Ç–æ –ø–µ—Ä–µ–¥–∞–Ω–∞—á–∞–µ—Ç
–≠—Ç–æ –æ–∑c
```
ati): stueal|float $vntaddMinutes(in blic functio
pu Carbon:—Ç–æ–¥–∞ –≤—Ç—É—Ä–∞ –º–µ–≥–Ω–∞
// –°–∏`php:

``—Ç–∞–Ω–¥–∞—Ä—Ç—É —Å–æ–º—É–¥—É–µ—Ç —ç—Çarbon —Å–ª–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π. C –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—é –¥–ª—è–∏–∑–∞—Ü–∏—É—é —Ç–∏–ø—Å—Ç—Ä–æ–≥—É–µ—Ç –æ–ª—å–∑
PHP 8.2 –∏—Å–ø+
–∏—è –≤ PHP 8.2–∞—è —Ç–∏–ø–∏–∑–∞—Ü –°—Ç—Ä–æ–≥–∞–∂–Ω–æ

### —ç—Ç–æ –≤# –ü–æ—á–µ–º—É

#–∏–µ ‚úì
```–µ–¥–µ–Ω—Ä–∏–≤—è (int) –ø –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å–∞ 44 -–æ–∫—Ç–∞—Ç: –°—Ç—Ähp
# –†–µ–∑—É–ª—åiddleware.penMe/RefreshTokMiddlewar/app/Http/end_laravelutes" back "addMinare
grep -niddlewokenM –í RefreshT–Ω–∏–µ ‚úì

#–¥–µ—Ä–∏–≤–µ–µ—Ç—Å—è (int) –ø—Å–ø–æ–ª—å–∑—É5 - –∏–∞—Ç: –°—Ç—Ä–æ–∫–∞ 4# –†–µ–∑—É–ª—å—Çhp
Controller.pi/Authrs/Apontrolle/Http/Cel/applarav backend_ddMinutes""a
grep -n hControllerh
# –í Aut```basMinutes

–Ω–∏–π add–ª—å–∑–æ–≤–∞–ø–æ–∏—Å–∫ –≤—Å–µ—Ö –∏—Å

### –ü–æ–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ –ü—Ä
```

##arcleache:p artisan c:clear
phign conf
php artisae:linksan storage
php artice -RecursForic/storage -ublavel/p backend_lareml
Remove-Itelwershvel

```po–µ—Å—å –∫—ç—à Lara–Ω –≤—á–∏—â–µ
- ‚úÖ –ûorage–∫–∞ st—á–µ—Å–∫–∞—è —Å—Å—ã–ª–º–≤–æ–ª–∏–∑–¥–∞–Ω–∞ —Å–∏
- ‚úÖ –ü–µ—Ä–µ—Å–æ–Ω–µ–Ω–æ:–æ–ª–∂–µ –≤—ã–ø —Ç–∞–∫–ø—Ä–∞–≤–ª–µ–Ω–∏—è—Å–µ –∏—Å
–í –ø—Ä–æ—Ü–µ—Å—Å—Ç–∫–∞
—Ç–µ–ª—å–Ω–∞—è –æ—á–∏ –î–æ–ø–æ–ª–Ω–∏html`

##n-page.st-logi –ª–æ–≥–∏–Ω–∞: `te–æ–≤–∞–Ω–∏—è—Ç–µ—Å—Ç–∏—Ä –¥–ª—è –∏—Ü–∞–∑–¥–∞–Ω–∞ —Å—Ç—Ä–∞–Ω ‚úÖ –°–æ.php`
6.carbon-fix–µ—Ä–∫–∏: `test- –¥–ª—è –ø—Ä–æ–≤—Ç–µ—Å—Ç–¥–∞–Ω  ‚úÖ –°–æ–∑ear`
5.n cache:clphp artisa–Ω–∏—è: `—ç—à –ø—Ä–∏–ª–æ–∂–µ—â–µ–Ω –∫
4. ‚úÖ –û—á–∏nfig:clear`an cortis`php a—Ä–∞—Ü–∏–∏: –∫–æ–Ω—Ñ–∏–≥—É–µ–Ω –∫—ç—à –∏—â–û—á
3. ‚úÖ ` –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ(int)–±–∞–≤–ª–µ–Ω–æ `php` - –¥–ædleware.nMidfreshToke–ª–µ–Ω `Re–∞–≤. ‚úÖ –ò—Å–ø—Ä–≤–µ–¥–µ–Ω–∏–µ
2 `(int)` –ø—Ä–∏–ª–µ–Ω–æ–æ–±–∞–≤ - –¥roller.php`–µ–Ω `AuthCont1. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª

–∏—è—Ç–≤–Ω–Ω—ã–µ –¥–µ–π—Å—ã–ø–æ–ª–Ω–µ
## –írbon
–∏–±–æ–∫ Ca- –ù–µ—Ç –æ—à–Ω–∏—è
–µ—á–µ–µ–º—è –∏—Å—Ç –≤—Ä
- –£–∫–∞–∑–∞–Ω–æ–∫–µ–Ω –ü–æ–ª—É—á–µ–Ω —Ç–æ—Ö–æ–¥
-–Ω—ã–π –≤–ø–µ—à ‚úì –£—Å–ª—å—Ç–∞—Ç:**
-–µ–º—ã–π —Ä–µ–∑—É—Ç

**–û–∂–∏–¥–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ—Ä–æ–≤–µ—Ä—å
4. –ü–æ–π—Ç–∏"–ù–∞–∂–º–∏—Ç–µ "–í. ord`
3assw –ü–∞—Ä–æ–ª—å: `p  -.com`
 in@exampleil: `adm Ema  -
 :–Ω–Ω—ã–µ—á–µ—Ç–Ω—ã–µ –¥–∞ —É–ø–æ–ª—å–∑—É–π—Ç–µ. –ò—Å—Ä–µ
2–±—Ä–∞—É–∑–µ` –≤ -page.htmlgin–π—Ç–µ `test-lo–û—Ç–∫—Ä–æ1. –¥–∞:

 –≤—Ö–æ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—èml` –¥–ª—è —Ç–µ.htagen-p-logi`test–°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª 
–æ–≥–∏–Ω–∞
