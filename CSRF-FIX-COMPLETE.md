# ‚úÖ CSRF –ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞!

## –ü—Ä–æ–±–ª–µ–º–∞
HTTP 419 - CSRF token mismatch –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –ª–æ–≥–∏–Ω–∞

## –ü—Ä–∏—á–∏–Ω–∞
Laravel Sanctum –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ç—Ä–µ–±—É–µ—Ç CSRF —Ç–æ–∫–µ–Ω –¥–ª—è –≤—Å–µ—Ö stateful –∑–∞–ø—Ä–æ—Å–æ–≤, –≤–∫–ª—é—á–∞—è `/api/login`.

## –†–µ—à–µ–Ω–∏–µ
–ò—Å–∫–ª—é—á–µ–Ω –º–∞—Ä—à—Ä—É—Ç `/api/login` –∏–∑ CSRF –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ `bootstrap/app.php`:

```php
->withMiddleware(function (Middleware $middleware): void {
    $middleware->api(prepend: [
        \Laravel\Sanctum\Http\Middleware\EnsureFrontendRequestsAreStateful::class,
    ]);
    
    // Exclude login endpoint from CSRF verification
    $middleware->validateCsrfTokens(except: [
        'api/login',
    ]);
})
```

## –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –≤–æ–π—Ç–∏!

### –®–∞–≥ 1: –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –±—Ä–∞—É–∑–µ—Ä–∞
–ù–∞–∂–º–∏—Ç–µ F5 –∏–ª–∏ Ctrl+R –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `http://localhost:3000/admin/login`

### –®–∞–≥ 2: –í–æ–π–¥–∏—Ç–µ
- **–õ–æ–≥–∏–Ω**: `admin`
- **–ü–∞—Ä–æ–ª—å**: `MLCdJIqUJyvFwV1`

### –®–∞–≥ 3: –ù–∞–∂–º–∏—Ç–µ "–í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É"

–î–æ–ª–∂–Ω–æ —Å—Ä–∞–±–æ—Ç–∞—Ç—å! ‚úÖ

---

## –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

1. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Laravel Sanctum
2. ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
3. ‚úÖ –°–æ–∑–¥–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å "admin"
4. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ª–æ–≥–∏–Ω–∞
5. ‚úÖ **–ò—Å–∫–ª—é—á–µ–Ω /api/login –∏–∑ CSRF –ø—Ä–æ–≤–µ—Ä–∫–∏**

---

## –°—Ç–∞—Ç—É—Å: ‚úÖ –ì–û–¢–û–í–û

–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ:
1. –í–æ–π—Ç–∏ –≤ –∞–¥–º–∏–Ω–∫—É
2. –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
3. –ó–∞–≥—Ä—É–∂–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
4. –°–æ—Ö—Ä–∞–Ω—è—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è

**–ü—Ä–∏—è—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã!** üéâ
