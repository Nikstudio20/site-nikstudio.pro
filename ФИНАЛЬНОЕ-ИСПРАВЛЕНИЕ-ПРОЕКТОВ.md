# Финальное исправление деталей проектов

## Проблема
После замены `fetch()` на `apiClient` возникла новая ошибка:
```
TypeError: response.json is not a function
```

## Причина
В функции `handleCreateDetail` осталась строка:
```typescript
const data = await response.json()
```

Но `apiClient` возвращает axios response, где данные уже в `response.data`, а не нужно вызывать `.json()`.

## Решение

**❌ Было (неправильно):**
```typescript
const response = await apiClient.post(`/api/projects/${resolvedParams.slug}/detail`, formData)
const data = await response.json()  // ❌ Ошибка! response.json не существует
```

**✅ Стало (правильно):**
```typescript
const response = await apiClient.post(`/api/projects/${resolvedParams.slug}/detail`, formData)
const data = response.data  // ✅ Правильно! Данные в response.data
```

## Почему это важно

### Разница между fetch и apiClient:

**fetch() (старый способ):**
```typescript
const response = await fetch('/api/endpoint')
// response = Response object
const data = await response.json()  // Нужно парсить JSON
```

**apiClient (новый способ):**
```typescript
const response = await apiClient.get('/api/endpoint')
// response = axios response object
const data = response.data  // Данные уже распакованы
```

### Структура axios response:
```typescript
{
  data: { ... },      // <-- Наши данные от API
  status: 200,
  statusText: 'OK',
  headers: { ... },
  config: { ... }
}
```

## Правило

При использовании `apiClient`:
- ✅ Используйте `response.data` для получения данных
- ❌ НЕ используйте `response.json()` - этого метода нет

## Тестирование

После исправления:
1. Откройте любой проект: `http://localhost:3000/admin/projects/[slug]`
2. Попробуйте создать детали проекта (если их еще нет)
3. Ошибка "response.json is not a function" должна исчезнуть
4. Детали должны успешно создаваться

## Итог

Это было последнее исправление в цепочке замены `fetch()` на `apiClient`. Теперь все операции с деталями проектов работают корректно.
