# Руководство по тестированию SEO настроек

## Перед тестированием

1. Убедитесь, что вы авторизованы в админке
2. Откройте консоль браузера (F12) для просмотра логов
3. Проверьте наличие токена в cookies:
   ```javascript
   document.cookie.split(';').find(c => c.trim().startsWith('admin-token='))
   ```

## Тестирование Глобальных настроек

1. Откройте `/admin/seo`
2. Перейдите на вкладку **"Глобальные"**
3. Заполните поля:
   - Название сайта: `NIK Studio`
   - Описание сайта: `Комплексные решения для промышленных компаний`
   - Тип Twitter Card: `Summary Large Image`
   - Facebook App ID: (опционально)
   - Изображение по умолчанию: загрузите изображение (макс 2 МБ)
4. Нажмите **"Сохранить настройки"**
5. В консоли должны появиться логи:
   ```
   [GlobalSEOSettings] Token exists: true
   [GlobalSEOSettings] Отправка запроса на /api/seo/settings
   [GlobalSEOSettings] Ответ получен: {success: true, ...}
   ```
6. Должно появиться сообщение: **"Глобальные SEO-настройки успешно сохранены"**

## Тестирование настроек Страниц

1. Перейдите на вкладку **"Страницы"**
2. Выберите тип страницы (например, **"Главная"**)
3. Заполните поля:
   - SEO Заголовок: `NIK Studio - Главная`
   - SEO Описание: `Описание главной страницы`
   - Ключевые слова: добавьте несколько ключевых слов
   - Канонический URL: `https://nikstudio.pro/`
   - SEO Изображение: загрузите изображение (макс 2 МБ)
4. Нажмите **"Сохранить настройки"**
5. В консоли должны появиться логи:
   ```
   [PageSEOSettings] Token exists: true
   [PageSEOSettings] Отправка данных на: /api/seo/pages/home
   [PageSEOSettings] Ответ получен: {success: true, ...}
   ```
6. Должно появиться сообщение: **"SEO-настройки для страницы "Главная" успешно сохранены"**

## Тестирование SEO Контента

### Проекты

1. Перейдите на вкладку **"Контент"**
2. Убедитесь, что выбрана вкладка **"Проекты"**
3. Выберите любой проект и нажмите **"Редактировать SEO"**
4. Заполните поля:
   - SEO Заголовок: `Название проекта - NIK Studio`
   - SEO Описание: `Описание проекта для поисковых систем`
   - SEO Изображение: загрузите изображение (макс 2 МБ)
5. Нажмите **"Сохранить"**
6. В консоли должны появиться логи:
   ```
   [ContentSEOManager] Token exists: true
   [ContentSEOManager] Отправка запроса на: /api/seo/projects/{slug}
   [ContentSEOManager] Ответ получен: {success: true, ...}
   ```
7. Должно появиться сообщение: **"SEO-данные для "{название}" успешно сохранены"**

### Блог

1. Перейдите на вкладку **"Блог"**
2. Выберите любой пост и нажмите **"Редактировать SEO"**
3. Заполните поля аналогично проектам
4. Нажмите **"Сохранить"**
5. Проверьте логи и сообщение об успехе

## Возможные проблемы и решения

### Ошибка: "Токен авторизации не найден"

**Причина:** Вы не авторизованы или токен истёк

**Решение:**
1. Перейдите на `/admin/login`
2. Войдите в систему
3. Вернитесь на страницу SEO

### Ошибка: "Unauthenticated. Please login via the frontend application"

**Причина:** Токен не передаётся на сервер или недействителен

**Решение:**
1. Проверьте наличие токена в консоли:
   ```javascript
   document.cookie.split(';').find(c => c.trim().startsWith('admin-token='))
   ```
2. Если токена нет - войдите заново
3. Если токен есть - проверьте логи в консоли браузера
4. Проверьте, что Laravel сервер запущен на `http://localhost:8000`

### Ошибка: "Размер изображения не должен превышать 2 МБ"

**Причина:** Загружаемое изображение слишком большое

**Решение:**
1. Сожмите изображение
2. Используйте формат WebP для лучшего сжатия
3. Убедитесь, что размер файла не превышает 2 МБ

### Ошибка валидации

**Причина:** Не заполнены обязательные поля или неверный формат данных

**Решение:**
1. Проверьте, что все обязательные поля заполнены
2. Проверьте формат данных (например, URL должен быть валидным)
3. Посмотрите детали ошибки в консоли браузера

## Проверка результатов

После успешного сохранения:

1. Обновите страницу `/admin/seo`
2. Проверьте, что данные сохранились:
   - На вкладке **"Обзор"** должна обновиться статистика
   - При повторном открытии формы должны отображаться сохранённые данные
3. Проверьте на фронтенде:
   - Откройте соответствующую страницу сайта
   - Просмотрите исходный код (Ctrl+U)
   - Найдите мета-теги SEO в `<head>`

## Логи для отладки

Все компоненты SEO теперь выводят подробные логи в консоль:

- `[GlobalSEOSettings]` - логи глобальных настроек
- `[PageSEOSettings]` - логи настроек страниц
- `[ContentSEOManager]` - логи SEO контента
- `[API Client]` - логи API клиента (токены, ошибки)

Если возникают проблемы, скопируйте логи из консоли для анализа.
