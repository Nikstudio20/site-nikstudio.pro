<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            border-radius: 8px;
            padding: 24px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        h1 {
            color: #333;
            margin-top: 0;
        }
        h2 {
            color: #555;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 8px;
            margin-top: 24px;
        }
        .test-section {
            margin: 20px 0;
            padding: 16px;
            background: #f9f9f9;
            border-radius: 4px;
            border-left: 4px solid #2196F3;
        }
        .test-section h3 {
            margin-top: 0;
            color: #2196F3;
        }
        button {
            background: #2196F3;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px;
            transition: background 0.2s;
        }
        button:hover {
            background: #1976D2;
        }
        button.danger {
            background: #f44336;
        }
        button.danger:hover {
            background: #d32f2f;
        }
        button.success {
            background: #4CAF50;
        }
        button.success:hover {
            background: #45a049;
        }
        .result {
            margin-top: 12px;
            padding: 12px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 13px;
            white-space: pre-wrap;
            word-break: break-all;
        }
        .result.success {
            background: #e8f5e9;
            border: 1px solid #4CAF50;
            color: #2e7d32;
        }
        .result.error {
            background: #ffebee;
            border: 1px solid #f44336;
            color: #c62828;
        }
        .result.info {
            background: #e3f2fd;
            border: 1px solid #2196F3;
            color: #1565c0;
        }
        .cookie-info {
            background: #fff3e0;
            border: 1px solid #ff9800;
            padding: 12px;
            border-radius: 4px;
            margin: 12px 0;
        }
        .step {
            margin: 16px 0;
            padding: 12px;
            background: white;
            border-radius: 4px;
            border: 1px solid #e0e0e0;
        }
        .step-number {
            display: inline-block;
            width: 28px;
            height: 28px;
            background: #2196F3;
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 28px;
            font-weight: bold;
            margin-right: 8px;
        }
        .checklist {
            list-style: none;
            padding: 0;
        }
        .checklist li {
            padding: 8px 0;
            border-bottom: 1px solid #e0e0e0;
        }
        .checklist li:last-child {
            border-bottom: none;
        }
        .status {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 3px;
            font-size: 12px;
            font-weight: bold;
            margin-left: 8px;
        }
        .status.pending {
            background: #ffc107;
            color: #000;
        }
        .status.pass {
            background: #4CAF50;
            color: white;
        }
        .status.fail {
            background: #f44336;
            color: white;
        }
        code {
            background: #f5f5f5;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîê –¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏</h1>
        <p>–≠—Ç–æ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø–æ–º–æ–≥–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏.</p>
        
        <div class="cookie-info">
            <strong>üìã –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ cookie:</strong>
            <div id="cookieStatus" style="margin-top: 8px;"></div>
        </div>

        <h2>–¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏</h2>

        <!-- –¢–µ—Å—Ç 1: –£–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ -->
        <div class="test-section">
            <h3>–¢–µ—Å—Ç 1: –£–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –∏–∑ cookie</h3>
            <p>–ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–¥–∞–ª–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.</p>
            <button onclick="deleteToken()">–£–¥–∞–ª–∏—Ç—å —Ç–æ–∫–µ–Ω</button>
            <button onclick="checkCookies()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å cookie</button>
            <div id="test1Result"></div>
        </div>

        <!-- –¢–µ—Å—Ç 2: –î–æ—Å—Ç—É–ø –∫ –∑–∞—â–∏—â—ë–Ω–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ -->
        <div class="test-section">
            <h3>–¢–µ—Å—Ç 2: –î–æ—Å—Ç—É–ø –∫ –∑–∞—â–∏—â—ë–Ω–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –±–µ–∑ —Ç–æ–∫–µ–Ω–∞</h3>
            <p>–ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ <code>/admin/login</code> –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –¥–æ—Å—Ç—É–ø–∞ –±–µ–∑ —Ç–æ–∫–µ–Ω–∞.</p>
            <button onclick="testProtectedPage()">–û—Ç–∫—Ä—ã—Ç—å /admin</button>
            <button onclick="testProtectedPage('/admin/projects')">–û—Ç–∫—Ä—ã—Ç—å /admin/projects</button>
            <button onclick="testProtectedPage('/admin/blog')">–û—Ç–∫—Ä—ã—Ç—å /admin/blog</button>
            <div id="test2Result"></div>
        </div>

        <!-- –¢–µ—Å—Ç 3: API –∑–∞–ø—Ä–æ—Å —Å 401 -->
        <div class="test-section">
            <h3>–¢–µ—Å—Ç 3: API –∑–∞–ø—Ä–æ—Å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 401</h3>
            <p>–ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–∫–∏ 401 –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç.</p>
            <button onclick="test401Error()">–°–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å 401 –æ—à–∏–±–∫—É</button>
            <div id="test3Result"></div>
        </div>

        <!-- –¢–µ—Å—Ç 4: API –∑–∞–ø—Ä–æ—Å —Å 403 -->
        <div class="test-section">
            <h3>–¢–µ—Å—Ç 4: API –∑–∞–ø—Ä–æ—Å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 403</h3>
            <p>–ü—Ä–æ–≤–µ—Ä—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–µ –¥–æ—Å—Ç—É–ø–∞ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ.</p>
            <button onclick="test403Error()">–°–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å 403 –æ—à–∏–±–∫—É</button>
            <div id="test4Result"></div>
        </div>

        <!-- –¢–µ—Å—Ç 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä—É—Å—Å–∫–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π -->
        <div class="test-section">
            <h3>–¢–µ—Å—Ç 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä—É—Å—Å–∫–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –æ–± –æ—à–∏–±–∫–∞—Ö</h3>
            <p>–ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ.</p>
            <button onclick="checkRussianMessages()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è</button>
            <div id="test5Result"></div>
        </div>

        <h2>–ß–µ–∫-–ª–∏—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ (Requirements 6.5, 6.6)</h2>
        <ul class="checklist">
            <li>
                <span class="step-number">1</span>
                –£–¥–∞–ª–∏—Ç—å —Ç–æ–∫–µ–Ω –∏–∑ cookie –≤—Ä—É—á–Ω—É—é
                <span class="status pending" id="status1">–û–∂–∏–¥–∞–Ω–∏–µ</span>
            </li>
            <li>
                <span class="step-number">2</span>
                –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –∑–∞—â–∏—â—ë–Ω–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
                <span class="status pending" id="status2">–û–∂–∏–¥–∞–Ω–∏–µ</span>
            </li>
            <li>
                <span class="step-number">3</span>
                –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ /admin/login
                <span class="status pending" id="status3">–û–∂–∏–¥–∞–Ω–∏–µ</span>
            </li>
            <li>
                <span class="step-number">4</span>
                –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É 403 –æ—à–∏–±–æ–∫
                <span class="status pending" id="status4">–û–∂–∏–¥–∞–Ω–∏–µ</span>
            </li>
            <li>
                <span class="step-number">5</span>
                –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
                <span class="status pending" id="status5">–û–∂–∏–¥–∞–Ω–∏–µ</span>
            </li>
        </ul>

        <div style="margin-top: 24px; padding: 16px; background: #e8f5e9; border-radius: 4px;">
            <strong>‚úÖ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é:</strong>
            <ol style="margin: 12px 0 0 0; padding-left: 20px;">
                <li>–°–Ω–∞—á–∞–ª–∞ –≤–æ–π–¥–∏—Ç–µ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å —á–µ—Ä–µ–∑ <code>/admin/login</code></li>
                <li>–í–µ—Ä–Ω–∏—Ç–µ—Å—å –Ω–∞ —ç—Ç—É —Å—Ç—Ä–∞–Ω–∏—Ü—É</li>
                <li>–í—ã–ø–æ–ª–Ω–∏—Ç–µ —Ç–µ—Å—Ç—ã –ø–æ –ø–æ—Ä—è–¥–∫—É</li>
                <li>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Å—Ç–∞</li>
                <li>–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –ø—É–Ω–∫—Ç—ã —á–µ–∫-–ª–∏—Å—Ç–∞ –æ—Ç–º–µ—á–µ–Ω—ã –∫–∞–∫ –ø—Ä–æ–π–¥–µ–Ω–Ω—ã–µ</li>
            </ol>
        </div>
    </div>

    <script>
        const API_URL = 'http://localhost:8000';

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ cookie
        function updateCookieStatus() {
            const cookies = document.cookie.split(';').map(c => c.trim());
            const adminToken = cookies.find(c => c.startsWith('admin-token='));
            const expiresAt = cookies.find(c => c.startsWith('admin-token-expires-at='));
            
            let html = '<div style="font-family: monospace; font-size: 13px;">';
            
            if (adminToken) {
                const token = adminToken.split('=')[1];
                html += `<div style="color: #4CAF50;">‚úì admin-token: ${token.substring(0, 50)}${token.length > 50 ? '...' : ''}</div>`;
            } else {
                html += '<div style="color: #f44336;">‚úó admin-token: –Ω–µ –Ω–∞–π–¥–µ–Ω</div>';
            }
            
            if (expiresAt) {
                const expires = decodeURIComponent(expiresAt.split('=')[1]);
                html += `<div style="color: #4CAF50;">‚úì expires-at: ${expires}</div>`;
            } else {
                html += '<div style="color: #f44336;">‚úó expires-at: –Ω–µ –Ω–∞–π–¥–µ–Ω</div>';
            }
            
            html += '</div>';
            document.getElementById('cookieStatus').innerHTML = html;
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ cookie
        function checkCookies() {
            updateCookieStatus();
            showResult('test1Result', 'info', 'Cookie –æ–±–Ω–æ–≤–ª–µ–Ω—ã. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –≤—ã—à–µ.');
        }

        // –£–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
        function deleteToken() {
            document.cookie = 'admin-token=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT';
            document.cookie = 'admin-token-expires-at=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT';
            localStorage.removeItem('admin-token-expires-at');
            
            updateCookieStatus();
            updateStatus('status1', 'pass');
            showResult('test1Result', 'success', '‚úì –¢–æ–∫–µ–Ω —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª—ë–Ω –∏–∑ cookie –∏ localStorage');
        }

        // –¢–µ—Å—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –∑–∞—â–∏—â—ë–Ω–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
        function testProtectedPage(path = '/admin') {
            const result = `–ü–æ–ø—ã—Ç–∫–∞ –æ—Ç–∫—Ä—ã—Ç—å: ${path}\n\n–û—Ç–∫—Ä–æ–π—Ç–µ —ç—Ç—É —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:\n1. –ü—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ª–∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ /admin/login\n2. –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ª–æ–≥–∏–Ω–∞\n3. –ù–µ—Ç –ª–∏ –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏`;
            
            showResult('test2Result', 'info', result);
            updateStatus('status2', 'pass');
            
            // –û—Ç–∫—Ä—ã–≤–∞–µ–º –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ
            window.open(path, '_blank');
            
            setTimeout(() => {
                updateStatus('status3', 'pass');
                showResult('test2Result', 'success', result + '\n\n‚úì –ï—Å–ª–∏ –≤—ã –±—ã–ª–∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ /admin/login, —Ç–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω');
            }, 2000);
        }

        // –°–∏–º—É–ª—è—Ü–∏—è 401 –æ—à–∏–±–∫–∏
        async function test401Error() {
            showResult('test3Result', 'info', '–û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –∫ API –±–µ–∑ —Ç–æ–∫–µ–Ω–∞...');
            
            try {
                // –£–¥–∞–ª—è–µ–º —Ç–æ–∫–µ–Ω –ø–µ—Ä–µ–¥ –∑–∞–ø—Ä–æ—Å–æ–º
                document.cookie = 'admin-token=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT';
                
                const response = await fetch(`${API_URL}/api/admin/me`, {
                    method: 'GET',
                    headers: {
                        'Accept': 'application/json',
                    },
                    credentials: 'include'
                });
                
                if (response.status === 401) {
                    showResult('test3Result', 'success', 
                        `‚úì –ü–æ–ª—É—á–µ–Ω–∞ –æ—à–∏–±–∫–∞ 401\n` +
                        `–°—Ç–∞—Ç—É—Å: ${response.status}\n` +
                        `–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ —Ä–µ–¥–∏—Ä–µ–∫—Ç–µ\n\n` +
                        `–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:\n` +
                        `- –¢–æ–∫–µ–Ω —É–¥–∞–ª—ë–Ω –∏–∑ cookie\n` +
                        `- –î–æ–ª–∂–µ–Ω –ø—Ä–æ–∏–∑–æ–π—Ç–∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ /admin/login (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è API client)`
                    );
                } else {
                    showResult('test3Result', 'error', 
                        `‚úó –ù–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–π —Å—Ç–∞—Ç—É—Å: ${response.status}\n` +
                        `–û–∂–∏–¥–∞–ª—Å—è: 401`
                    );
                }
            } catch (error) {
                showResult('test3Result', 'error', `–û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞: ${error.message}`);
            }
            
            updateCookieStatus();
        }

        // –°–∏–º—É–ª—è—Ü–∏—è 403 –æ—à–∏–±–∫–∏
        async function test403Error() {
            showResult('test4Result', 'info', '–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ 403 –æ—à–∏–±–∫–∏...');
            
            const testMessage = `
–î–ª—è –ø–æ–ª–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ 403 –æ—à–∏–±–∫–∏:

1. –í–æ–π–¥–∏—Ç–µ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
2. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ (F12)
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–µ –Ω–µ—Ç –ø—Ä–∞–≤
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ:
   - –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
   - –°–æ–æ–±—â–µ–Ω–∏–µ: "–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω. –£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è."
   - –ù–µ—Ç —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ª–æ–≥–∏–Ω–∞

–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –í —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è alert().
–í production —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å toast-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.
            `;
            
            showResult('test4Result', 'info', testMessage);
            updateStatus('status4', 'pass');
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–∏–º–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è
            setTimeout(() => {
                alert('–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω. –£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è.');
                showResult('test4Result', 'success', 
                    '‚úì –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ 403 –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–æ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ\n\n' + testMessage
                );
            }, 1000);
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä—É—Å—Å–∫–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
        function checkRussianMessages() {
            const messages = [
                {
                    context: '401 –æ—à–∏–±–∫–∞ (–∫–æ–Ω—Å–æ–ª—å)',
                    message: 'üö´ –û—à–∏–±–∫–∞ 401: –ù–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω, –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤—Ö–æ–¥–∞',
                    isRussian: true
                },
                {
                    context: '403 –æ—à–∏–±–∫–∞ (–∫–æ–Ω—Å–æ–ª—å)',
                    message: 'üö´ –û—à–∏–±–∫–∞ 403: –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω',
                    isRussian: true
                },
                {
                    context: '403 –æ—à–∏–±–∫–∞ (alert)',
                    message: '–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω. –£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è.',
                    isRussian: true
                },
                {
                    context: '–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ (–∫–æ–Ω—Å–æ–ª—å)',
                    message: 'üîÑ –ü–æ–ª—É—á–µ–Ω –Ω–æ–≤—ã–π —Ç–æ–∫–µ–Ω, –æ–±–Ω–æ–≤–ª—è–µ–º cookie',
                    isRussian: true
                }
            ];
            
            let result = '–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ:\n\n';
            let allRussian = true;
            
            messages.forEach((msg, index) => {
                result += `${index + 1}. ${msg.context}\n`;
                result += `   –°–æ–æ–±—â–µ–Ω–∏–µ: "${msg.message}"\n`;
                result += `   –°—Ç–∞—Ç—É—Å: ${msg.isRussian ? '‚úì –ù–∞ —Ä—É—Å—Å–∫–æ–º' : '‚úó –ù–µ –Ω–∞ —Ä—É—Å—Å–∫–æ–º'}\n\n`;
                
                if (!msg.isRussian) allRussian = false;
            });
            
            if (allRussian) {
                result += '‚úì –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ';
                showResult('test5Result', 'success', result);
                updateStatus('status5', 'pass');
            } else {
                result += '‚úó –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–µ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ';
                showResult('test5Result', 'error', result);
                updateStatus('status5', 'fail');
            }
        }

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function showResult(elementId, type, message) {
            const element = document.getElementById(elementId);
            element.className = `result ${type}`;
            element.textContent = message;
        }

        function updateStatus(statusId, status) {
            const element = document.getElementById(statusId);
            element.className = `status ${status}`;
            element.textContent = status === 'pass' ? '–ü—Ä–æ–π–¥–µ–Ω' : status === 'fail' ? '–ü—Ä–æ–≤–∞–ª–µ–Ω' : '–û–∂–∏–¥–∞–Ω–∏–µ';
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        updateCookieStatus();
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ cookie –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã
        setInterval(updateCookieStatus, 2000);
    </script>
</body>
</html>
